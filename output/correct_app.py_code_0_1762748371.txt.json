{
  "filename": "correct_app.py_code_0_1762748371.txt",
  "content": "correct app.py code \n\nfrom flask import Flask, render_template, request\nimport os\nfrom werkzeug.utils import secure_filename\nfrom docx import Document\nimport pytesseract\nfrom PIL import Image\nimport PyPDF2\n\n# Path to Tesseract\npytesseract.pytesseract.tesseract_cmd = r'C:\\Program Files\\Tesseract-OCR\\tesseract.exe'\n\napp = Flask(__name__)\n\nUPLOAD_FOLDER = 'uploads'\nOUTPUT_FOLDER = 'output'\nALLOWED_EXTENSIONS = {'txt', 'pdf', 'docx', 'png', 'jpg', 'jpeg'}\n\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\nos.makedirs(OUTPUT_FOLDER, exist_ok=True)\n\ndef allowed_file(filename):\n    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\ndef extract_text_from_txt(file_path):\n    with open(file_path, 'r', encoding='utf-8') as file:\n        return file.read()\n\ndef extract_text_from_docx(file_path):\n    doc = Document(file_path)\n    return '\\n'.join([para.text for para in doc.paragraphs])\n\ndef extract_text_from_pdf(file_path):\n    text = \"\"\n    with open(file_path, 'rb') as file:\n        reader = PyPDF2.PdfReader(file)\n        for page in reader.pages:\n            text += page.extract_text() or ''\n    return text\n\ndef extract_text_from_image(file_path):\n    image = Image.open(file_path)\n    return pytesseract.image_to_string(image)\n\ndef save_extracted_text(filename, text):\n    base_filename = os.path.splitext(filename)[0]\n    output_path = os.path.join(OUTPUT_FOLDER, f\"{base_filename}.txt\")\n    with open(output_path, 'w', encoding='utf-8') as out_file:\n        out_file.write(text)\n\n@app.route('/', methods=['GET', 'POST'])\ndef upload_files():\n    messages = []\n    errors = []\n\n    if request.method == 'POST':\n        uploaded_files = request.files.getlist('files')\n        if not uploaded_files or uploaded_files[0].filename == '':\n            errors.append(\"âš ï¸ No files selected.\")\n            return render_template('upload.html', messages=messages, errors=errors)\n\n        for file in uploaded_files:\n            filename = secure_filename(file.filename)\n            if file and allowed_file(filename):\n                file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n                file.save(file_path)\n                ext = filename.rsplit('.', 1)[1].lower()\n\n                try:\n                    if ext == 'txt':\n                        text = extract_text_from_txt(file_path)\n                    elif ext == 'docx':\n                        text = extract_text_from_docx(file_path)\n                    elif ext == 'pdf':\n                        text = extract_text_from_pdf(file_path)\n                    elif ext in {'png', 'jpg', 'jpeg'}:\n                        text = extract_text_from_image(file_path)\n                    else:\n                        errors.append(f\"âŒ Unsupported file type: {filename}\")\n                        continue\n\n                    save_extracted_text(filename, text)\n                    messages.append(f\"âœ… {filename} uploaded and text saved successfully!\")\n                except Exception as e:\n                    errors.append(f\"âŒ Error processing {filename}: {str(e)}\")\n            else:\n                errors.append(f\"âŒ File type not allowed: {filename}\")\n\n    return render_template('upload.html', messages=messages, errors=errors)\n\nif __name__ == '__main__':\n    app.run(debug=True)\n\n\n\n\n\n\n\n# ==========================\n# ðŸ§  SMARTDOC | Built Different\n# By: Yashhh (Sigma Mode ON)\n# ==========================\n\nfrom flask import Flask, render_template, request\nimport os\nfrom werkzeug.utils import secure_filename\nfrom docx import Document\nimport pytesseract\nfrom PIL import Image\nimport PyPDF2\nimport sqlite3\nfrom datetime import datetime\n\n# === CONFIG AREA ===\napp = Flask(__name__)\nUPLOAD_FOLDER = 'uploads'\nOUTPUT_FOLDER = 'output'\nALLOWED_EXTENSIONS = {'txt', 'pdf', 'docx', 'png', 'jpg', 'jpeg'}\n\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\nos.makedirs(OUTPUT_FOLDER, exist_ok=True)\n\n# Set Tesseract path (Windows default)\npytesseract.pytesseract.tesseract_cmd = r'C:\\Program Files\\Tesseract-OCR\\tesseract.exe'\n\n\n# === DB INIT (Run once) ===\ndef init_db():\n    with sqlite3.connect('smartdoc_data.db') as conn:\n        conn.execute('''\n            CREATE TABLE IF NOT EXISTS extracted_docs (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                filename TEXT,\n                content TEXT,\n                uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n            )\n        ''')\n        conn.commit()\ninit_db()\n\n\n# === UTILITY ZONE ===\ndef allowed_file(filename):\n    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\ndef extract_text(file_path, ext):\n    if ext == 'txt':\n        with open(file_path, 'r', encoding='utf-8') as file:\n            return file.read()\n    elif ext == 'docx':\n        doc = Document(file_path)\n        return '\\n'.join([para.text for para in doc.paragraphs])\n    elif ext == 'pdf':\n        with open(file_path, 'rb') as file:\n            reader = PyPDF2.PdfReader(file)\n            return '\\n'.join([page.extract_text() or '' for page in reader.pages])\n    elif ext in {'png', 'jpg', 'jpeg'}:\n        image = Image.open(file_path)\n        return pytesseract.image_to_string(image)\n    else:\n        raise ValueError(\"Unsupported file extension.\")\n\ndef save_to_text_file(filename, text):\n    base = os.path.splitext(filename)[0]\n    path = os.path.join(OUTPUT_FOLDER, f\"{base}.txt\")\n    with open(path, 'w', encoding='utf-8') as f:\n        f.write(text)\n\ndef save_to_database(filename, text):\n    with sqlite3.connect('smartdoc_data.db') as conn:\n        conn.execute('INSERT INTO extracted_docs (filename, content) VALUES (?, ?)', (filename, text))\n        conn.commit()\n\n\n# === ROUTES ===\n@app.route('/', methods=['GET', 'POST'])\ndef home():\n    messages, errors = [], []\n\n    if request.method == 'POST':\n        uploaded_files = request.files.getlist('files')\n        if not uploaded_files or uploaded_files[0].filename == '':\n            errors.append(\"âš ï¸ No files selected. SmartDoc moves require inputs.\")\n        else:\n            for file in uploaded_files:\n                filename = secure_filename(file.filename)\n                ext = filename.rsplit('.', 1)[1].lower()\n\n                if file and allowed_file(filename):\n                    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n                    file.save(file_path)\n\n                    try:\n                        text = extract_text(file_path, ext)\n                        save_to_text_file(filename, text)\n                        save_to_database(filename, text)\n                        messages.append(f\"âœ… {filename} processed and stored\")\n                    except Exception as e:\n                        errors.append(f\"âŒ {filename} failed: {str(e)}\")\n                else:\n                    errors.append(f\"âŒ {filename} not allowed. SmartDoc only supports clean formats.\")\n\n    return render_template('upload.html', messages=messages, errors=errors)\n\n\n# === START THE ENGINE ===\nif __name__ == '__main__':\n    print(\"ðŸ”¥ SmartDoc running... Ready to convert chaos into clarity.\")\n    app.run(debug=True)\nâš ï¸ Translation Error: correct app.py code \n\nfrom flask import Flask, render_template, request\nimport os\nfrom werkzeug.utils import secure_filename\nfrom docx import Document\nimport pytesseract\nfrom PIL import Image\nimport PyPDF2\n\n# Path to Tesseract\npytesseract.pytesseract.tesseract_cmd = r'C:\\Program Files\\Tesseract-OCR\\tesseract.exe'\n\napp = Flask(__name__)\n\nUPLOAD_FOLDER = 'uploads'\nOUTPUT_FOLDER = 'output'\nALLOWED_EXTENSIONS = {'txt', 'pdf', 'docx', 'png', 'jpg', 'jpeg'}\n\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\nos.makedirs(OUTPUT_FOLDER, exist_ok=True)\n\ndef allowed_file(filename):\n    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\ndef extract_text_from_txt(file_path):\n    with open(file_path, 'r', encoding='utf-8') as file:\n        return file.read()\n\ndef extract_text_from_docx(file_path):\n    doc = Document(file_path)\n    return '\\n'.join([para.text for para in doc.paragraphs])\n\ndef extract_text_from_pdf(file_path):\n    text = \"\"\n    with open(file_path, 'rb') as file:\n        reader = PyPDF2.PdfReader(file)\n        for page in reader.pages:\n            text += page.extract_text() or ''\n    return text\n\ndef extract_text_from_image(file_path):\n    image = Image.open(file_path)\n    return pytesseract.image_to_string(image)\n\ndef save_extracted_text(filename, text):\n    base_filename = os.path.splitext(filename)[0]\n    output_path = os.path.join(OUTPUT_FOLDER, f\"{base_filename}.txt\")\n    with open(output_path, 'w', encoding='utf-8') as out_file:\n        out_file.write(text)\n\n@app.route('/', methods=['GET', 'POST'])\ndef upload_files():\n    messages = []\n    errors = []\n\n    if request.method == 'POST':\n        uploaded_files = request.files.getlist('files')\n        if not uploaded_files or uploaded_files[0].filename == '':\n            errors.append(\"âš ï¸ No files selected.\")\n            return render_template('upload.html', messages=messages, errors=errors)\n\n        for file in uploaded_files:\n            filename = secure_filename(file.filename)\n            if file and allowed_file(filename):\n                file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n                file.save(file_path)\n                ext = filename.rsplit('.', 1)[1].lower()\n\n                try:\n                    if ext == 'txt':\n                        text = extract_text_from_txt(file_path)\n                    elif ext == 'docx':\n                        text = extract_text_from_docx(file_path)\n                    elif ext == 'pdf':\n                        text = extract_text_from_pdf(file_path)\n                    elif ext in {'png', 'jpg', 'jpeg'}:\n                        text = extract_text_from_image(file_path)\n                    else:\n                        errors.append(f\"âŒ Unsupported file type: {filename}\")\n                        continue\n\n                    save_extracted_text(filename, text)\n                    messages.append(f\"âœ… {filename} uploaded and text saved successfully!\")\n                except Exception as e:\n                    errors.append(f\"âŒ Error processing {filename}: {str(e)}\")\n            else:\n                errors.append(f\"âŒ File type not allowed: {filename}\")\n\n    return render_template('upload.html', messages=messages, errors=errors)\n\nif __name__ == '__main__':\n    app.run(debug=True)\n\n\n\n\n\n\n\n# ==========================\n# ðŸ§  SMARTDOC | Built Different\n# By: Yashhh (Sigma Mode ON)\n# ==========================\n\nfrom flask import Flask, render_template, request\nimport os\nfrom werkzeug.utils import secure_filename\nfrom docx import Document\nimport pytesseract\nfrom PIL import Image\nimport PyPDF2\nimport sqlite3\nfrom datetime import datetime\n\n# === CONFIG AREA ===\napp = Flask(__name__)\nUPLOAD_FOLDER = 'uploads'\nOUTPUT_FOLDER = 'output'\nALLOWED_EXTENSIONS = {'txt', 'pdf', 'docx', 'png', 'jpg', 'jpeg'}\n\napp.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER\nos.makedirs(UPLOAD_FOLDER, exist_ok=True)\nos.makedirs(OUTPUT_FOLDER, exist_ok=True)\n\n# Set Tesseract path (Windows default)\npytesseract.pytesseract.tesseract_cmd = r'C:\\Program Files\\Tesseract-OCR\\tesseract.exe'\n\n\n# === DB INIT (Run once) ===\ndef init_db():\n    with sqlite3.connect('smartdoc_data.db') as conn:\n        conn.execute('''\n            CREATE TABLE IF NOT EXISTS extracted_docs (\n                id INTEGER PRIMARY KEY AUTOINCREMENT,\n                filename TEXT,\n                content TEXT,\n                uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n            )\n        ''')\n        conn.commit()\ninit_db()\n\n\n# === UTILITY ZONE ===\ndef allowed_file(filename):\n    return '.' in filename and filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\ndef extract_text(file_path, ext):\n    if ext == 'txt':\n        with open(file_path, 'r', encoding='utf-8') as file:\n            return file.read()\n    elif ext == 'docx':\n        doc = Document(file_path)\n        return '\\n'.join([para.text for para in doc.paragraphs])\n    elif ext == 'pdf':\n        with open(file_path, 'rb') as file:\n            reader = PyPDF2.PdfReader(file)\n            return '\\n'.join([page.extract_text() or '' for page in reader.pages])\n    elif ext in {'png', 'jpg', 'jpeg'}:\n        image = Image.open(file_path)\n        return pytesseract.image_to_string(image)\n    else:\n        raise ValueError(\"Unsupported file extension.\")\n\ndef save_to_text_file(filename, text):\n    base = os.path.splitext(filename)[0]\n    path = os.path.join(OUTPUT_FOLDER, f\"{base}.txt\")\n    with open(path, 'w', encoding='utf-8') as f:\n        f.write(text)\n\ndef save_to_database(filename, text):\n    with sqlite3.connect('smartdoc_data.db') as conn:\n        conn.execute('INSERT INTO extracted_docs (filename, content) VALUES (?, ?)', (filename, text))\n        conn.commit()\n\n\n# === ROUTES ===\n@app.route('/', methods=['GET', 'POST'])\ndef home():\n    messages, errors = [], []\n\n    if request.method == 'POST':\n        uploaded_files = request.files.getlist('files')\n        if not uploaded_files or uploaded_files[0].filename == '':\n            errors.append(\"âš ï¸ No files selected. SmartDoc moves require inputs.\")\n        else:\n            for file in uploaded_files:\n                filename = secure_filename(file.filename)\n                ext = filename.rsplit('.', 1)[1].lower()\n\n                if file and allowed_file(filename):\n                    file_path = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n                    file.save(file_path)\n\n                    try:\n                        text = extract_text(file_path, ext)\n                        save_to_text_file(filename, text)\n                        save_to_database(filename, text)\n                        messages.append(f\"âœ… {filename} processed and stored\")\n                    except Exception as e:\n                        errors.append(f\"âŒ {filename} failed: {str(e)}\")\n                else:\n                    errors.append(f\"âŒ {filename} not allowed. SmartDoc only supports clean formats.\")\n\n    return render_template('upload.html', messages=messages, errors=errors)\n\n\n# === START THE ENGINE ===\nif __name__ == '__main__':\n    print(\"ðŸ”¥ SmartDoc running... Ready to convert chaos into clarity.\")\n    app.run(debug=True) --> Text length need to be between 0 and 5000 characters",
  "timestamp": "10 Nov 2025, 09:49 AM"
}